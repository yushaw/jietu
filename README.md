# SnapDescribe æˆªå›¾åŠ©æ‰‹

SnapDescribe æ˜¯ä¸€æ¬¾åŸºäº Avalonia çš„æ¡Œé¢æˆªå›¾åŠ©æ‰‹ï¼Œå¯ä»¥åœ¨ Windows ä¸Šå¿«é€Ÿè·å–çª—å£æˆ–ä»»æ„åŒºåŸŸçš„å›¾åƒï¼Œå°†æˆªå›¾äº¤ç»™æ™ºè°± GLM å¤šæ¨¡æ€æ¨¡å‹ç”Ÿæˆç»“æ„åŒ–æè¿°ï¼Œå¹¶æŠŠç»“æœç®¡ç†æˆå¯è¿½æº¯çš„ Markdown è®°å½•ã€‚åº”ç”¨æ”¯æŒæ‰˜ç›˜é©»ç•™ã€å…¨å±€çƒ­é”®ã€å¯¹è¯ç»­èŠä»¥åŠåŸºäºè¿›ç¨‹/çª—å£æ ‡é¢˜çš„è‡ªåŠ¨ Prompt åŒ¹é…ï¼Œä¸ºçŸ¥è¯†å·¥ä½œè€…ã€å®¢æœå›¢é˜Ÿå’Œä¸ªäººç¬”è®°åœºæ™¯å¸¦æ¥æ›´é«˜æ•ˆçš„æˆªå›¾æ•´ç†ä½“éªŒã€‚

## Roadmap

1. âœ… æŒ‰æˆªå›¾è¿›ç¨‹è‡ªåŠ¨å¥—ç”¨å¯¹åº” Promptï¼ˆå·²å®ç°ï¼Œå¯åœ¨è®¾ç½®é¡µç»´æŠ¤è§„åˆ™ï¼‰ã€‚
2. ğŸš§ é›†æˆå¤–éƒ¨å‘½ä»¤/å·¥å…·è°ƒç”¨ï¼Œè®©æˆªå›¾æµç¨‹è”åŠ¨æ›´å¤šè‡ªåŠ¨åŒ–è„šæœ¬ã€‚
3. ğŸš§ è‡ªåŠ¨æ›´æ–°æœºåˆ¶ï¼Œå†…ç½®æ¸ é“åŠæ—¶è·å–æ–°ç‰ˆç‰¹æ€§ä¸ä¿®å¤ã€‚
4. ğŸš§ MCPï¼ˆModel Context Protocolï¼‰æ”¯æŒï¼Œè¿æ¥æ¨¡å‹ä¸Šä¸‹æ–‡ä¸å¤šæºæ•°æ®ã€‚
5. ğŸš§ æ ‡å‡† Agent æ¨¡å¼ï¼Œå®ç°å¯æ‰©å±•çš„ä»»åŠ¡é“¾å’Œæ’ä»¶ä½“ç³»ã€‚
6. ğŸš§ å¯¹è¯ä½“éªŒä¼˜åŒ–ï¼Œæ¶µç›–è®°å¿†ã€è‰ç¨¿å’Œæ›´å‹å¥½çš„æ¶ˆæ¯ç»„ç»‡ã€‚
7. ğŸš§ AI åŠ©æ‰‹ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†å¸¸ç”¨ Promptã€è§’è‰²ä¸ä»»åŠ¡æ¨¡æ¿ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- **çª—å£/åŒºåŸŸæˆªå›¾**ï¼šæ”¯æŒé«˜äº®çª—å£é€‰æ‹©æˆ–æ‰‹åŠ¨æ¡†é€‰ï¼Œè‡ªåŠ¨è¯†åˆ«è¿›ç¨‹åä¸çª—å£æ ‡é¢˜ã€‚
- **å¤šæ¨¡æ€å¯¹è¯**ï¼šå°† PNG ä»¥ Base64 å‘é€åˆ°æ™ºè°± GLM `chat/completions`ï¼Œæ”¯æŒå¯¹è¯ç»­èŠä¸ä¸Šä¸‹æ–‡è®°å¿†ã€‚
- **Prompt è§„åˆ™åŒ¹é…**ï¼šæŒ‰è¿›ç¨‹æˆ–çª—å£æ ‡é¢˜è‡ªåŠ¨åˆ‡æ¢ Promptï¼ˆé»˜è®¤å†…ç½®å¸¸è§æµè§ˆå™¨ã€PDFã€IMã€WPS è§„åˆ™ï¼‰ã€‚
- **ç»“æœé¢„è§ˆ**ï¼šå¼¹çª—å±•ç¤ºæˆªå›¾ã€å…ƒæ•°æ®ã€å¯¹è¯è®°å½•ï¼Œå¯ç›´æ¥ç»§ç»­è¿½é—®æˆ–å¤åˆ¶å†…å®¹ã€‚
- **æœ¬åœ° OCR**ï¼šåœ¨è§„åˆ™ä¸­é€‰æ‹© OCR èƒ½åŠ›ï¼Œè°ƒç”¨ Tesseract è¯†åˆ«æˆªå›¾æ–‡æœ¬ï¼Œæ”¯æŒå¤šè¯­è¨€åˆ†æ®µå±•ç¤ºä¸å¤åˆ¶ã€‚
- **æœ¬åœ°æŒä¹…åŒ–**ï¼šæˆªå›¾ã€Markdown ä¼šè¯ä¸æ—¥å¿—é»˜è®¤ä¿å­˜åˆ°ç”¨æˆ·ç›®å½•ï¼Œæ˜“äºå½’æ¡£ã€‚
- **å…¨å±€çƒ­é”®ä¸æ‰˜ç›˜**ï¼šé»˜è®¤ `Alt+T`ï¼Œå¯è‡ªå®šä¹‰ï¼ŒåŒæ—¶æ”¯æŒæ‰˜ç›˜èœå•å¿«æ·æ“ä½œã€‚
- **å¤šè¯­è¨€ç•Œé¢**ï¼šå†…ç½®ä¸­æ–‡/è‹±æ–‡ï¼Œé¦–æ¬¡å¯åŠ¨è‡ªåŠ¨åŒ¹é…ç³»ç»Ÿè¯­è¨€ï¼Œå¯åœ¨è®¾ç½®é¡µä¸€é”®åˆ‡æ¢ã€‚
- **ä¸»çª—å£è‡ªåŠ¨éšè—**ï¼šæˆªå›¾æ—¶è‡ªåŠ¨æœ€å°åŒ–ä¸»ç•Œé¢ï¼Œå®Œæˆåæ¢å¤ï¼Œé¿å…é®æŒ¡æˆªå›¾åŒºåŸŸã€‚

## å®‰è£…ä¸å¿«é€Ÿä½“éªŒ

### ç¯å¢ƒè¦æ±‚

- Windows 10/11ï¼ˆæˆªå›¾ä¸æ‰˜ç›˜åŠŸèƒ½ä¾èµ– Win32 APIï¼‰ã€‚
- .NET 8 SDKï¼ˆå¼€å‘ä¸è°ƒè¯•éœ€è¦ï¼‰ã€‚
- å¯ç”¨çš„æ™ºè°±å¤§æ¨¡å‹ API Keyã€‚

### è¿è¡Œæ­¥éª¤

1. **ç›´æ¥å®‰è£…**ï¼ˆæ¨èï¼‰ï¼šå‰å¾€ GitHub Release ä¸‹è½½ `SnapDescribeSetup.exe`ï¼ŒåŒå‡»æŒ‰ç…§å‘å¯¼å®Œæˆå®‰è£…ï¼ˆè‡ªåŠ¨åŒ…å« OCR æ‰€éœ€çš„ `tessdata` è¯­è¨€åŒ…ï¼‰ã€‚  
2. **æºç è¿è¡Œ**ï¼š
   ```bash
   git clone https://github.com/yushaw/SnapDescribe.git
   cd SnapDescribe
   dotnet restore
   dotnet run --project SnapDescribe.App
   ```

é¦–æ¬¡è¿è¡Œè¯·åœ¨â€œè®¾ç½®â€é¡µå¡«å†™ Base URLï¼ˆé»˜è®¤ `https://open.bigmodel.cn/api/paas/v4/`ï¼‰ã€API Key ä¸æ¨¡å‹åç§°ï¼ˆé»˜è®¤ `glm-4.5v`ï¼‰ï¼Œéšåå³å¯é€šè¿‡æŒ‰é’®æˆ–å…¨å±€çƒ­é”®å¯åŠ¨æˆªå›¾æµç¨‹ã€‚åº”ç”¨ä¼šæ ¹æ®ç³»ç»Ÿè¯­è¨€è‡ªåŠ¨é€‰æ‹©ä¸­æ–‡æˆ–è‹±æ–‡ç•Œé¢ï¼Œä¹Ÿå¯éšæ—¶åœ¨è®¾ç½®é¡µåˆ‡æ¢ã€‚

> æç¤ºï¼šå‘½ä»¤è¡Œæ‰§è¡Œ `SnapDescribe.exe --shutdown` å¯ä»¥é€šçŸ¥æ­£åœ¨è¿è¡Œçš„å®ä¾‹é€€å‡ºï¼Œå®‰è£…åŒ…å‡çº§æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨è¿™ä¸€æœºåˆ¶ï¼Œé¿å…â€œæ–‡ä»¶è¢«å ç”¨â€æŠ¥é”™ã€‚

## å‘å¸ƒä¸å‡çº§

æœ¬åœ°ç”Ÿæˆ Windows x64 è‡ªåŒ…å«å•æ–‡ä»¶ï¼š

```bash
dotnet publish SnapDescribe.App -c Release -r win-x64 --self-contained true \
  /p:PublishSingleFile=true \
  /p:InstallVersion=<ç‰ˆæœ¬å·>
makensis -DSourceDir=$(pwd)/SnapDescribe.App/bin/Release/net8.0/win-x64/publish \
  -DAppIcon=$(pwd)/SnapDescribe.App/Assets/AppIcon.ico \
  -DInstallVersion=<ç‰ˆæœ¬å·> \
  installer/SnapDescribeInstaller.nsi
```

å‘å¸ƒç›®å½•å†…ä¼šç”Ÿæˆ `SnapDescribe.exe`ã€`tessdata/` è¯­è¨€åŒ…ä»¥åŠå®Œæ•´å®‰è£…åŒ… `SnapDescribeSetup.exe`ã€‚æ¨é€ `v*` æ ‡ç­¾åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ„å»º NSIS å®‰è£…å™¨å¹¶å°† `SnapDescribeSetup.exe` å‘å¸ƒåˆ° Releaseã€‚

åç»­ç‰ˆæœ¬å°†è¡¥å……è‡ªåŠ¨æ›´æ–°é€šé“ï¼Œç¡®ä¿åº”ç”¨èƒ½åœ¨ç³»ç»Ÿå†…ç›´æ¥æ£€æµ‹å¹¶å®‰è£…æ–°ç‰ˆæœ¬ã€‚

## é»˜è®¤é…ç½®ä¸æ•°æ®ä½ç½®

- Prompt è§„åˆ™ä¸å…¶ä»–è®¾ç½®ä¿å­˜åœ¨ `%APPDATA%\SnapDescribe\settings.json`ã€‚é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨å†™å…¥å†…ç½®è§„åˆ™ï¼šå¸¸è§ PDF é˜…è¯»å™¨æ˜ å°„åˆ° OCR Promptï¼ŒChrome/Edge ä½¿ç”¨ç½‘é¡µæ€»ç»“ï¼Œtuitui.exe ä¸ WeChat ç»™å‡ºèŠå¤©å›å¤è‰æ¡ˆï¼ŒWPS è¡¨æ ¼/æ–‡æ¡£åˆ†åˆ«åº”ç”¨æ•°æ®åˆ†æä¸æ¶¦è‰² Promptã€‚
- OCR èƒ½åŠ›ä¾èµ–æœ¬åœ° Tesseractã€‚åº”ç”¨å·²å†…ç½® `eng` ä¸ `chi_sim` è¯­è¨€åŒ…ï¼Œé»˜è®¤å³å¯ä½¿ç”¨ï¼›è‹¥éœ€å…¶ä»–è¯­è¨€ï¼Œå¯å°†å¯¹åº”çš„ `.traineddata` æ–‡ä»¶æ”¾å…¥ `tessdata` ç›®å½•ï¼ˆæˆ–åœ¨è®¾ç½®ä¸­æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„ï¼‰ï¼Œå¹¶åœ¨è§„åˆ™å‚æ•°é‡Œé€šè¿‡ `language` é”®è¦†ç›–è¯­è¨€ç»„åˆï¼ˆä¾‹å¦‚ `eng+deu`ï¼‰ã€‚
- æˆªå›¾ä¸ Markdown å¯¹è¯é»˜è®¤ä½äº `æˆ‘çš„å›¾ç‰‡/SnapDescribe`ï¼ˆå¯åœ¨è®¾ç½®ä¸­è°ƒæ•´ï¼‰ã€‚
- æ—¥å¿—è¾“å‡ºè·¯å¾„ä¸º `%APPDATA%\SnapDescribe\logs\`ã€‚

## ç›®å½•ç»“æ„

```
SnapDescribe.App/         # Avalonia å®¢æˆ·ç«¯é¡¹ç›®
â”œâ”€â”€ App.axaml(.cs)       # åº”ç”¨å…¥å£ä¸ä¾èµ–æ³¨å…¥
â”œâ”€â”€ Program.cs           # Main æ–¹æ³•
â”œâ”€â”€ Models/              # æ•°æ®æ¨¡å‹ï¼ˆè®¾ç½®ã€æˆªå›¾è®°å½•ã€Prompt è§„åˆ™ç­‰ï¼‰
â”œâ”€â”€ Services/            # æˆªå›¾ã€AI è°ƒç”¨ã€çƒ­é”®ã€è®¾ç½®å­˜å‚¨ã€æ—¥å¿—
â”œâ”€â”€ ViewModels/          # MVVM ViewModelï¼ˆä¸»çª—å£é€»è¾‘ï¼‰
â”œâ”€â”€ Views/               # Avalonia ç•Œé¢ (MainWindow, RegionSelectionWindow, ResultDialog)
â”œâ”€â”€ Assets/              # å›¾æ ‡ç­‰é™æ€èµ„æº
â””â”€â”€ SnapDescribe.App.csproj

make_icon.cs             # æ‰˜ç›˜å›¾æ ‡ç”Ÿæˆè„šæœ¬
SnapDescribe.sln         # è§£å†³æ–¹æ¡ˆæ–‡ä»¶
```

## å¼€å‘æç¤º

- æ¨èä½¿ç”¨ Riderã€Visual Studio æˆ– VS Codeï¼ˆC# Dev Kitï¼‰è¿›è¡Œè°ƒè¯•ï¼Œä»“åº“å·²é…ç½®å¸¸è§ `.gitignore`ã€‚
- MVVM åŸºäº `CommunityToolkit.Mvvm`ï¼Œå‘½ä»¤ã€é€šçŸ¥ä¸éƒ¨åˆ†å±æ€§ç»‘å®šé€šè¿‡æºç ç”Ÿæˆã€‚
- `ScreenshotService` ä½¿ç”¨ Win32 APIï¼ˆ`user32.dll`ï¼‰è·å–çª—å£ä¸è¿›ç¨‹ä¿¡æ¯ï¼›å¦‚éœ€è·¨å¹³å°æ”¯æŒï¼Œè¯·æ ¹æ®å¹³å°æ›¿æ¢å®ç°ã€‚
- `IAiClient` æ˜¯æ¨¡å‹è°ƒç”¨æŠ½è±¡å±‚ï¼Œå½“å‰å®ç°ä½¿ç”¨ `GlmClient`ï¼›å¯åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•è‡ªå®šä¹‰æ¨¡å‹æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡ã€‚
- ç»“æœå¼¹çª—ï¼ˆ`ResultDialog`ï¼‰ä¸ä¸»ç•Œé¢å…±äº« `CaptureRecord`ï¼Œæµç¨‹ä¸­æ³¨æ„ UI çº¿ç¨‹è®¿é—®ï¼Œå·²æœ‰ç¤ºä¾‹å¯å‚è€ƒã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚å»ºè®®åœ¨æäº¤ä»£ç å‰è¿è¡Œï¼š

```bash
dotnet build SnapDescribe.sln
dotnet publish SnapDescribe.App -c Release -r win-x64 --self-contained true /p:PublishSingleFile=true
```

å¦‚æœæ¶‰åŠæ–°ç‰¹æ€§ï¼Œè¯·åŒæ­¥æ›´æ–° `README.md` ä¸ Roadmapã€‚
